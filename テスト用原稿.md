<!-- filepath: c:\Users\sunda\Documents\OneDrive - 近畿大学\Scripts\Python\PyRef\test.md -->
# PyRefPmid テスト用ファイル

このファイルは `PyRefPmid.py` スクリプトの動作をテストするために使用されます。
様々なパターンのPMID引用を含んでいます。

**テストの目的:**

*   単独のPMID引用が正しく認識され、番号付けされること。
*   連続するPMID引用（スペース区切り、スペースなし、改行区切り）がグループとして認識され、各PMIDがソートされた上で番号付けされること。
*   本文中でのPMIDの出現順と、連続引用グループ内でのソート順に基づいて、文献リストの番号が一意に決定されること。
*   存在しないPMID（例: `99999999`）が引用された場合でも、番号は付与され、文献リストにはエラーとして表示されること。
*   同じPMIDが複数回引用された場合、同じ参照番号が使用されること。
*   `[pm ...]()` と `[pmid ...]()` の両方の形式が認識されること（大文字・小文字区別なし）。
*   括弧 `()` 内のテキストは無視されること。
*   処理後に `References` セクションが正しく生成・追記されること。
*   `References` セクションのヘッダーレベルが適切であること。

**期待される出力の確認ポイント:**

1.  **本文中の引用置換**: 全ての `[pm...]` および `[pmid...]` 形式の引用が、`(番号)` や `(番号1,番号2)` のような形式に置換されているか。
2.  **`References` セクションの生成**: ファイルの末尾に `## References` (または適切なレベルのヘッダー) が生成されているか。
3.  **文献リストの順序と内容**:
    *   文献リストの番号は、本文中の最初の出現順（連続引用の場合はグループとしての最初の出現、グループ内ではPMIDの昇順）に従っているか。
    *   各文献情報（著者、タイトル、雑誌、年など）が正しく取得・表示されているか。
    *   存在しないPMIDについては、エラーメッセージ（例: `論文情報の取得に失敗しました`）が表示されているか。
    *   PMIDへのリンクが正しく生成されているか。

---

以下、テスト用の引用を含みます。

## 基本的な引用

最初の引用は [pm 10000001]() です。これは重要な論文です。

次に、別の引用 [pmid 10000002]() を追加します。

同じ引用 [pmid 10000001]() を再度使用します。

存在しない PMID [pm 99999999]() も試してみましょう。

最後に、もう一つ有効な引用 [pm 10000003]() を入れます。

## 連続する引用のテスト

### 2つの連続 (スペースなし、ソート前)

[pmid 10000005]()[pmid 10000004]()

### 2つの連続 (スペースあり、ソート前)

[pmid 10000007]()  [pmid 10000006]()

### 3つの連続 (ソート済み)

[pmid 10000008]()[pmid 10000009]()[pmid 10000010]()

### 4つの連続 (未ソート)

[pmid 10000013]()[pmid 10000011]()[pmid 10000014]()[pmid 10000012]()

### 連続するPMID (重複あり、未ソート)

[pmid 10000016]()[pmid 10000015]()[pmid 10000016]()

### 改行を含む連続PMID (ソート前)

これは改行を含むテストです。
[pmid 10000018]()
[pmid 10000017]()
このように書かれます。

## 混在パターンのテスト

単独引用 [pmid 10000019]() と、連続引用 [pmid 10000021]() [pmid 10000020]() があり、その後にまた単独 [pmid 10000022]() が続きます。

文末の連続PMIDのテストです [pmid 10000024]()[pmid 10000023]().

PMIDの間にハイフンがある場合: [pmid 10000025]()[pmid 10000026]() と [pmid 10000027]()-[pmid 10000028]().

複雑な組み合わせ: [pmid 10000030]()[pmid 10000029]() and [pmid 10000031](), then [pmid 10000034]() [pmid 10000032]() [pmid 10000033]().

### 新規引用と再引用の混在連続パターン

これは、新規のPMIDと、本文中で既に出現したPMIDが混在して連続しているパターンです。
例えば、[pmid 10000039]()[pmid 10000040]()[pmid 10000001]()[pmid 10000041]()[pmid 10000042]() のような場合です。
ここで `10000001` は既出のPMIDです。

もう一つの例: [pmid 10000002]()[pmid 10000043]()[pmid 10000008]()[pmid 10000044]() のように、複数の既出PMIDが新規PMIDと混ざる場合。

## 別のセクション

ここにも引用 [pmid 10000002]() を含めます。

そして、新しい連続引用 [pmid 10000035]()[pmid 10000036]()[pmid 10000037]()[pmid 10000038]() をテストします。
